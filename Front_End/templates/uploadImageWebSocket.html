{% extends 'base.html' %}

{% block head %}
    <title>Image Upload (No Disk)</title>
    <style>
        .container {
            max-width: 600px;
            margin: 20px auto;
            text-align: center;
            font-family: sans-serif;
        }

        /* Essential: The map will not show up without a defined height */
        #map {
            height: 400px;
            width: 100%;
            margin-top: 30px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }

        .image-preview-area {
            margin: 20px 0;
            min-height: 100px;
        }
        img {
            max-width: 500px;
            height: auto;
            margin-top: 20px;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
    </style>

{% endblock %}

{% block body %}
    <div class="content">
        <h1>Upload Receipt</h1>

        <h1 style="text-align: center">Upload an Image (In Memory)</h1>
        <form id="imageForm" method="POST" enctype="multipart/form-data">
            <input id="imageInput" type="file" name="image" accept="image/*" required>
            <!input type="hidden" name="image_base64" id="imageBase64Input">
            <button type="submit">Upload</button>
        </form>

        <img id="preview" style="display:none;" />

        <script src="{{ url_for('static', filename='js/imagePreviewWebSocket.js') }}" defer></script>
        {% if image_data %}
            <h2>Server-processed Preview (After Upload):</h2>
            <img src="{{ image_data }}" style="max-width: 500px; margin-top: 20px;">
        {% endif %}
    </div>
    <div id="map"></div>
    <script defer src="https://maps.googleapis.com/maps/api/js?key={{ google_map_api }}&callback=initMap"
></script>




{% endblock %}
